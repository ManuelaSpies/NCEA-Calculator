{% extends "base.html" %}

{% block title %} Home {% endblock %}

{% block head %}
    {{ super() }}
{% endblock %}

{% block body %}
    <h1>NCEA Credit Calculator</h1>
    <div class="piechart" id="all_credits_piechart"></div>
    <div class="piechart" id="l3_credits_piechart"></div>
    <div class="piechart" id="l2_credits_piechart"></div>
    <div class="piechart" id="l1_credits_piechart"></div>
    <div class="container">
        <table class="table">
            <tr>
                <th>Grade</th>
                <th>All</th>
                <th>Excellence</th>
                <th>Merit</th>
                <th>Achieved</th>
                <th>Left</th>
            </tr>

            {% for result in results %}
                <tr>
                    <td><em>{{  result[0] }}</em></td>
                    <td>{{  result[1] }}</td>
                    <td>{{  result[2] }}</td>
                    <td>{{  result[3] }}</td>
                    <td>{{  result[4] }}</td>
                    <td>{{  result[5] }}</td>
                </tr>
            {% endfor %}
        </table>
    </div>
{% endblock %}
{% block footer %}
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <!-- ALL CREDITS CHART -->
    <script type="text/javascript">
        // Load google charts
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        // Draw the chart and set the chart values
        function drawChart() {
          var data = google.visualization.arrayToDataTable([
          ['Grade', 'Credits'],
          ['Excellence', {{ results[0][2] }} ],
          ['Merit', {{ results[0][3] }} ],
          ['Achieved', {{ results[0][4] }} ],
          ['Left', {{ results[0][5] }} ]

        ]);
          var options = {'title':'All Credits'};

          var chart = new google.visualization.PieChart(document.getElementById('all_credits_piechart'));
          chart.draw(data, options);
        }
    </script>
        <!-- L3 CREDITS CHART -->
    <script type="text/javascript">
        // Load google charts
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        // Draw the chart and set the chart values
        function drawChart() {
          var data = google.visualization.arrayToDataTable([
          ['Grade', 'Credits'],
          ['Excellence', {{ results[1][2] }} ],
          ['Merit', {{ results[1][3] }} ],
          ['Achieved', {{ results[1][4] }} ],
          ['Left', {{ results[1][5] }} ]

        ]);
          var options = {'title':'Level 3'};

          var chart = new google.visualization.PieChart(document.getElementById('l3_credits_piechart'));
          chart.draw(data, options);
        }
    </script>
        <!-- L2 CREDITS CHART -->
    <script type="text/javascript">
        // Load google charts
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        // Draw the chart and set the chart values
        function drawChart() {
          var data = google.visualization.arrayToDataTable([
          ['Grade', 'Credits'],
          ['Excellence', {{ results[2][2] }} ],
          ['Merit', {{ results[2][3] }} ],
          ['Achieved', {{ results[2][4] }} ],
          ['Left', {{ results[2][5] }} ]

        ]);
          var options = {'title':'Level 2'};

          var chart = new google.visualization.PieChart(document.getElementById('l2_credits_piechart'));
          chart.draw(data, options);
        }
    </script>
        <!-- ALL CREDITS CHART -->
    <script type="text/javascript">
        // Load google charts
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        // Draw the chart and set the chart values
        function drawChart() {
          var data = google.visualization.arrayToDataTable([
          ['Grade', 'Credits'],
          ['Excellence', {{ results[3][2] }} ],
          ['Merit', {{ results[3][3] }} ],
          ['Achieved', {{ results[3][4] }} ],
          ['Left', {{ results[3][5] }} ]

        ]);
          var options = {'title':'Level 1'};

          var chart = new google.visualization.PieChart(document.getElementById('l1_credits_piechart'));
          chart.draw(data, options);
        }
    </script>
{% endblock %}